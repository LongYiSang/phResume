POSTGRES_USER=phresume
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=phresume
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_SSLMODE=disable
API_PORT=8080
API_MAX_RESUMES=3
API_MAX_TEMPLATES=2
REDIS_HOST=localhost
REDIS_PORT=6379
MINIO_ENDPOINT=localhost:9000
MINIO_PUBLIC_ENDPOINT=http://localhost:9000
MINIO_ACCESS_KEY_ID=CHANGE_ME_ACCESS_KEY
MINIO_SECRET_ACCESS_KEY=CHANGE_ME_SECRET_KEY
MINIO_USE_SSL=false
MINIO_BUCKET=resumes
MINIO_REGION=us-east-1
# auto/dns/path（默认 auto）
MINIO_BUCKET_LOOKUP=auto
# 是否自动创建 bucket（本地开发可 true；托管对象存储建议 false）
MINIO_AUTO_CREATE_BUCKET=true
JWT_PRIVATE_KEY=BASE64_ENCODED_PRIVATE_PEM
JWT_PUBLIC_KEY=BASE64_ENCODED_PUBLIC_PEM
JWT_ACCESS_TOKEN_TTL=15m
JWT_REFRESH_TOKEN_TTL=168h
INTERNAL_API_SECRET=CHANGE_ME_RANDOM_SECRET

# ---------------------------------
# Worker（渲染/并发/metrics）
# ---------------------------------

WORKER_INTERNAL_API_BASE_URL=http://api:8080
WORKER_FRONTEND_BASE_URL=http://frontend:3000
WORKER_CONCURRENCY=10
WORKER_METRICS_ADDR=:9100

# ---------------------------------
# 安全 (Phase 4)
# ---------------------------------

# ClamAV 病毒扫描服务地址
CLAMAV_HOST=clamav
CLAMAV_PORT=3310

# ---------------------------------
# 认证与限流配置 (新增)
# ---------------------------------

# 登录限流：每 IP+用户名 每小时允许的登录次数（默认 10）
API_LOGIN_RATE_LIMIT_PER_HOUR=10

# 登录锁定：连续失败次数阈值（默认 5）
API_LOGIN_LOCK_THRESHOLD=5

# 登录锁定 TTL：如 30m、1h（默认 30m）
API_LOGIN_LOCK_TTL=30m

# WebSocket 允许源白名单，逗号分隔；为空表示只允许同源
# 例如："https://resume.example.com,https://staging.resume.example.com"
API_ALLOWED_ORIGINS=

# 上传最大体积（字节，默认 5242880 = 5MB）
API_UPLOAD_MAX_BYTES=5242880

# 上传 MIME 白名单（逗号分隔，默认：image/png,image/jpeg,image/webp）
API_UPLOAD_MIME_WHITELIST=image/png,image/jpeg,image/webp

# 生成任务频控：每用户每小时允许触发次数（默认 3）
API_PDF_RATE_LIMIT_PER_HOUR=3

# PDF 下载安全：下载 Token TTL（默认 60s）
API_PDF_DOWNLOAD_TOKEN_TTL=60s

# 上传频控：每用户每小时允许上传次数（默认 2）
API_UPLOAD_RATE_LIMIT_PER_HOUR=2

# ---------------------------------
# Cookie 域共享（生产建议设置为顶级域）
# ---------------------------------
# 例如：.resume.example.com
# 留空表示跟随当前主机域（本地开发）
API_COOKIE_DOMAIN=
