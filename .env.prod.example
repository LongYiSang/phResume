# -----------------------------
# 生产环境 docker-compose.prod.yml 示例
# -----------------------------
# 注意：
# - 请复制为服务器上的 `.env`（或自定义文件并用 `--env-file` 指定）
# - 所有密码/密钥必须替换为强随机值，严禁入库

# -----------------------------
# 镜像仓库（GHCR）
# -----------------------------
GHCR_OWNER=YOUR_GITHUB_ORG_OR_USER

# -----------------------------
# Postgres（同机自建，docker compose）
# -----------------------------
DATABASE_HOST=db
DATABASE_PORT=5432
DATABASE_SSLMODE=disable
POSTGRES_DB=phresume
POSTGRES_USER=phresume
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# -----------------------------
# Redis（同机自建，docker compose）
# -----------------------------
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------
# 对象存储（S3/COS/MinIO 兼容）
# -----------------------------
MINIO_ENDPOINT=YOUR_S3_ENDPOINT
MINIO_PUBLIC_ENDPOINT=https://YOUR_PUBLIC_S3_ENDPOINT
MINIO_ACCESS_KEY_ID=CHANGE_ME_ACCESS_KEY
MINIO_SECRET_ACCESS_KEY=CHANGE_ME_SECRET_KEY
MINIO_USE_SSL=true
MINIO_BUCKET=resumes
MINIO_REGION=us-east-1
# auto/dns/path（根据对象存储与自定义域名情况调整）
MINIO_BUCKET_LOOKUP=auto
# 托管对象存储一般不建议由应用自动创建 bucket
MINIO_AUTO_CREATE_BUCKET=false

# -----------------------------
# ClamAV（建议继续容器内运行，不对外暴露端口）
# -----------------------------
CLAMAV_HOST=clamav
CLAMAV_PORT=3310
# 如遇 clamav 镜像 tag 拉取失败（manifest not found），可显式指定镜像：
# CLAMAV_IMAGE=clamav/clamav:latest

# -----------------------------
# 内部接口密钥（Worker 调用 API 内部打印接口）
# -----------------------------
INTERNAL_API_SECRET=CHANGE_ME_RANDOM_SECRET

# -----------------------------
# JWT（后端要求 Base64 编码的 PEM）
# -----------------------------
JWT_PRIVATE_KEY=BASE64_ENCODED_PRIVATE_PEM
JWT_PUBLIC_KEY=BASE64_ENCODED_PUBLIC_PEM
JWT_ACCESS_TOKEN_TTL=15m
JWT_REFRESH_TOKEN_TTL=168h

# -----------------------------
# Worker（渲染/并发/metrics）
# -----------------------------
WORKER_INTERNAL_API_BASE_URL=http://api:8080
WORKER_FRONTEND_BASE_URL=http://frontend:3000
WORKER_CONCURRENCY=5
WORKER_METRICS_ADDR=:9100

# -----------------------------
# API（可选）
# -----------------------------
API_ALLOWED_ORIGINS=
API_COOKIE_DOMAIN=

# PDF 下载安全（可选，默认 60s）
API_PDF_DOWNLOAD_TOKEN_TTL=60s
